{
    "version": "https://jsonfeed.org/version/1",
    "title": "ç­†è¨˜ZONE â€¢ All posts by \"ci/cd\" tag",
    "description": "",
    "home_page_url": "https://zonego.tw",
    "items": [
        {
            "id": "https://zonego.tw/2022/01/06/drone-git-push/",
            "url": "https://zonego.tw/2022/01/06/drone-git-push/",
            "title": "drone-git-push è¸©é›·å¿ƒå¾—",
            "date_published": "2022-01-06T12:15:54.000Z",
            "content_html": "<p><a href=\"https://www.drone.io/\">Drone CI</a> æ˜¯ä¸€å€‹å¯ä»¥è‡ªè¡Œçš„ CI (Continuous Integration) è»Ÿé«”</p>\n<p>ä½¿ç”¨ CI çš„ç”¨æ„å°±æ˜¯ç‚ºäº†ï¼Œèƒ½åœ¨å¯«å®Œç¨‹å¼æ™‚ï¼Œè‡ªå‹•æ¸¬è©¦ã€ç·¨è­¯èˆ‡ç™¼ä½ˆç¨‹å¼ã€‚</p>\n<span id=\"more\"></span>\n\n<p>é—œæ–¼æ€éº¼æ¶è¨­æ”¹å¤©å†å¯«ä¸€ç¯‡æ•™å­¸ã€‚ <del>Googleä¸€ä¸‹æ‡‰è©²å°±å¾ˆå¤šæ•™å­¸äº†</del></p>\n<h2 id=\"drone-git-push\"><a href=\"#drone-git-push\" class=\"headerlink\" title=\"drone-git-push\"></a>drone-git-push</h2><p>å›ä¾†æœ¬ç¯‡ä¸»é¡Œ</p>\n<p>é€™æ¬¡æˆ‘çš„éœ€æ±‚æ˜¯åœ¨ Drone çš„æµç¨‹å…§ï¼Œæ¸¬è©¦æˆ–ç·¨è­¯å®Œç¨‹å¼å¾Œä»¥ git æ¨é€åˆ°ä¸åŒçš„å„²è—åº«</p>\n<p>å…¶å¯¦å°±æ˜¯è¦ç”¢ç”Ÿç¶²ç«™æª”æ¡ˆå¾Œï¼Œæ¨é€åˆ° GitHub æ–¹ä¾¿ç”¨ GitHub Page æˆ–æ˜¯ Cloudflare Page</p>\n<p>åœ¨ Drone CI ä¸­å¯ä»¥ç”¨ <a href=\"http://plugins.drone.io/appleboy/drone-git-push/\">drone-git-push</a> åšåˆ°</p>\n<p>é€™æ¬¡é‡åˆ°çš„å•é¡Œæœ‰2å€‹ <del>å®³æˆ‘ç‚ºäº†æ‰¾å•é¡Œå¤šèŠ±å¾ˆå¤šæ™‚é–“</del></p>\n<h2 id=\"å„²å­˜åº«è¾¨è­˜å¤±æ•—\"><a href=\"#å„²å­˜åº«è¾¨è­˜å¤±æ•—\" class=\"headerlink\" title=\"å„²å­˜åº«è¾¨è­˜å¤±æ•—\"></a>å„²å­˜åº«è¾¨è­˜å¤±æ•—</h2><p>éŒ¯èª¤è¨Šæ¯:</p>\n<figure class=\"highlight node-repl\"><table><tr><td class=\"code\"><pre><code class=\"hljs node-repl\"><span class=\"hljs-meta prompt_\">...</span><br>parse \\&quot;git@github.com:user/repo.git\\&quot;: first path segment in URL cannot contain colon&quot;<br><span class=\"hljs-meta prompt_\">...</span><br></code></pre></td></tr></table></figure>\n\n<p>ç…§åŸæœ¬æ–‡ä»¶å¯«çš„ <code>.drone.yml</code> å¤§æ¦‚æ˜¯é•·é€™æ¨£</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><code class=\"hljs yaml\"><span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">deploy</span> <span class=\"hljs-string\">git</span><br>  <span class=\"hljs-attr\">image:</span> <span class=\"hljs-string\">appleboy/drone-git-push</span><br>  <span class=\"hljs-attr\">settings:</span><br>    <span class=\"hljs-attr\">branch:</span> <span class=\"hljs-string\">main</span><br>    <span class=\"hljs-attr\">remote:</span> <span class=\"hljs-string\">git@github.com:user/repo.git</span><br>    <span class=\"hljs-attr\">force:</span> <span class=\"hljs-literal\">false</span><br>    <span class=\"hljs-attr\">commit:</span> <span class=\"hljs-literal\">true</span><br></code></pre></td></tr></table></figure>\n\n<p>åƒè€ƒ<a href=\"https://github.com/appleboy/drone-git-push/issues/40\">GitHubè¨è«–å€</a>çš„è§£æ±ºæ–¹æ³•</p>\n<ul>\n<li>ä½¿ç”¨ç·Šæ€¥ä¿®è£œçš„ image</li>\n<li>remote æ”¹ç”¨å­—ä¸²</li>\n</ul>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><code class=\"hljs yaml\"><span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">deploy</span> <span class=\"hljs-string\">git</span><br>  <span class=\"hljs-attr\">image:</span> <span class=\"hljs-string\">appleboy/drone-git-push:0.2.0-linux-amd64</span><br>  <span class=\"hljs-attr\">settings:</span><br>    <span class=\"hljs-attr\">branch:</span> <span class=\"hljs-string\">main</span><br>    <span class=\"hljs-attr\">remote:</span> <span class=\"hljs-string\">&quot;git@github.com:user/repo.git&quot;</span><br>    <span class=\"hljs-attr\">force:</span> <span class=\"hljs-literal\">false</span><br>    <span class=\"hljs-attr\">commit:</span> <span class=\"hljs-literal\">true</span><br></code></pre></td></tr></table></figure>\n\n<h2 id=\"SSH-Key-è®€å–å¤±æ•—\"><a href=\"#SSH-Key-è®€å–å¤±æ•—\" class=\"headerlink\" title=\"SSH Key è®€å–å¤±æ•—\"></a>SSH Key è®€å–å¤±æ•—</h2><p>ç”±æ–¼è³‡å®‰çš„é—œä¿‚ï¼Œ SSH KEY ä¸å¯ä»¥è·Ÿè‘—ç¨‹å¼ç¢¼æ¨é€åˆ°å„²å­˜åº«ï¼Œæ›´ä¸å¯èƒ½æ”¾æ˜ç¢¼åœ¨è¨­å®šæª”ä¸­</p>\n<p>åœ¨ Drone CI è¦æ”¹ç”¨ secret çš„åŠŸèƒ½</p>\n<p><code>.drone.yml</code> å¤§æ¦‚é•·é€™æ¨£</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><code class=\"hljs yaml\"><span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">deploy</span> <span class=\"hljs-string\">git</span><br>  <span class=\"hljs-attr\">image:</span> <span class=\"hljs-string\">appleboy/drone-git-push:0.2.0-linux-amd64</span><br>  <span class=\"hljs-attr\">settings:</span><br>    <span class=\"hljs-attr\">branch:</span> <span class=\"hljs-string\">main</span><br>    <span class=\"hljs-attr\">ssh_key:</span><br>      <span class=\"hljs-attr\">from_secret:</span> <span class=\"hljs-string\">githubkey</span><br></code></pre></td></tr></table></figure>\n\n<p>å¦å¤–åœ¨ Drone CI çš„ WebUI ä¸Šæ·»åŠ  Secret</p>\n<p>å°‡ private key çš„å…§æ–‡è²¼é€²å»</p>\n<p><img onerror=\"imgOnError(this);\" data-fancybox=\"gallery\" src=\"/images/content/DroneCI-secret.png\" alt=\"secret\" data-caption=\"secret\" loading=\"lazy\"></p>\n<p>ç„¶å¾Œå°±ç¢°åˆ°å•é¡Œäº†</p>\n<p>éŒ¯èª¤è¨Šæ¯:</p>\n<figure class=\"highlight node-repl\"><table><tr><td class=\"code\"><pre><code class=\"hljs node-repl\"><span class=\"hljs-meta prompt_\">...</span><br>Load key &quot;/root/.ssh/id_rsa&quot;: invalid format<br><span class=\"hljs-meta prompt_\">...</span><br></code></pre></td></tr></table></figure>\n\n<p>åƒè€ƒ<a href=\"https://github.com/appleboy/drone-git-push/issues/37\">GitHubè¨è«–å€</a>çš„è§£æ±ºæ–¹æ³•</p>\n<ul>\n<li>ç”¢ç”Ÿçš„ SSH key éœ€è¦æ”¹ç”¨ PEM</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><code class=\"hljs bash\">ssh-keygen -t rsa -b 4096 -C <span class=\"hljs-string\">&quot;your_email@example.com&quot;</span> -m PEM<br></code></pre></td></tr></table></figure>\n\n<p>æ›å®Œ KEY ç”šéº¼å•é¡Œéƒ½æ²’äº†ğŸ‰</p>\n",
            "tags": [
                "Git",
                "CI/CD",
                "Drone"
            ]
        }
    ]
}